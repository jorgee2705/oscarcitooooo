define(['jquery','underscore',],function($,_){'use strict';return function(config,element){var videoElement=element[0].querySelector('[data-background-type=video]'),viewportElement=document.createElement('div'),$slider=null;let $overlayHoverSelector=$('div[data-content-type="%s"][data-show-overlay="%s"]'.replace('%s',config.dataRole).replace('%s',config.showOverlay)),$overlayButtonSelector=$('div[data-content-type="%s"][data-show-button="%s"]'.replace('%s',config.dataRole).replace('%s',config.showOverlay));if($overlayHoverSelector.length||$overlayButtonSelector.length){require(['Magento_PageBuilder/js/widget/show-on-hover'],function(showOnHover){showOnHover(config);});}
if(videoElement){require(['Magento_PageBuilder/js/widget/video-background'],function(videoBackground){$slider=$(element).closest('[data-content-type=slider]');viewportElement.classList.add('jarallax-viewport-element');videoElement.setAttribute('data-element-in-viewport','.jarallax-viewport-element');videoElement.appendChild(viewportElement);videoBackground(config,videoElement);if($slider.data('afterChangeIsSet')){return;}
$slider.on('afterChange init',function(){var videoSlides=$slider[0].querySelectorAll('.jarallax');_.each(videoSlides,function(videoSlide){videoSlide.jarallax&&videoSlide.jarallax.onScroll();});});$slider.data('afterChangeIsSet',true);});}};});