define(['jquery'],function($){'use strict';const loadImagesMixin={_loadImages:function(){this.delayExecuted=true;var $this=this;var images=(this.element.is('img'))?this.element:this.element.find(this.options.imageSelector);var $visibility=(this.options.checkVisibility)?':visible':'';images.filter('['+this.options.normalAttribute+']'+$visibility).each(function(){var $img=$(this);$img.addClass('visibility-hidden deferred-image');$img.attr('src',$img.attr($this.options.normalAttribute)).removeAttr($this.options.normalAttribute);if($img.hasClass('loading-image')){$img.removeClass('loading-image');}
$img.on('load',function(){$img.removeClass('visibility-hidden')});if($img.prop('complete')){$img.trigger('load');}});if(this.options.useResponsive){var attrToSearch=(this.isMobile)?this.options.mobileAttribute:this.options.desktopAttribute;images.filter('['+attrToSearch+']'+$visibility).each(function(){var $img=$(this);var $newSrc='';if($img.attr(attrToSearch)){$newSrc=$img.attr(attrToSearch);}
if(!$newSrc){$newSrc=$img.attr($this.options.normalAttribute);}
if($newSrc){$img.removeClass('no-src');if($newSrc!=$img.attr('src')){$img.addClass('visibility-hidden deferred-image');$img.attr('src',$newSrc);if($img.hasClass('loading-image')){$img.removeClass('loading-image');}
$img.on('load',function(){$img.removeClass('visibility-hidden')});if($img.prop('complete')){$img.trigger('load');}}}else{$img.addClass('no-src')}});}
this.element.removeClass(this.options.deferClass);this.element.addClass(this.options.deferredClass);}}
return function(loadImagesWidget){$.widget('mage.loadImages',loadImagesWidget,loadImagesMixin);return $.mage.loadImages;};});